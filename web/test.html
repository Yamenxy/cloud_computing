<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Test</title>
</head>
<body>
    <h1>Firebase Connection Test</h1>
    <div id="status">Testing Firebase connection...</div>
    <div id="error" style="color: red;"></div>
    <div id="data"></div>

    <script type="module">
        console.log('Script starting...');
        
        try {
            // Import Firebase
            const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js');
            const { getFirestore, collection, getDocs } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
            
            console.log('Firebase modules loaded');

            // Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyBLkw6NAJnbXgHVfS7EKyDTzZx_m5lEI4I",
                authDomain: "cloud-comuting-ccc74.firebaseapp.com",
                projectId: "cloud-comuting-ccc74",
                storageBucket: "cloud-comuting-ccc74.firebasestorage.app",
                messagingSenderId: "571964573753",
                appId: "1:571964573753:web:26666c90b67d567c5ba5e8",
                measurementId: "G-Y6BJVVWWD9"
            };

            console.log('Initializing Firebase...');
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            
            document.getElementById('status').textContent = 'Firebase initialized! Fetching data...';
            console.log('Firebase initialized');

            // Try to fetch groups
            const querySnapshot = await getDocs(collection(db, 'groups'));
            console.log('Groups fetched:', querySnapshot.size);
            
            document.getElementById('status').textContent = 'SUCCESS! Connected to Firebase';
            document.getElementById('data').innerHTML = `<p>Found ${querySnapshot.size} groups in database</p>`;
            
            querySnapshot.forEach((doc) => {
                console.log(doc.id, doc.data());
                const div = document.createElement('div');
                div.textContent = `Group: ${doc.data().name} (${doc.data().type})`;
                document.getElementById('data').appendChild(div);
            });

        } catch (error) {
            console.error('Error:', error);
            document.getElementById('status').textContent = 'ERROR!';
            document.getElementById('error').textContent = error.message + '\n' + error.stack;
        }
    </script>
</body>
</html>
